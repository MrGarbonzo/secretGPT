<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }}</title>
    
    <!-- SecretGPTee Styling -->
    <link rel="stylesheet" href="/static/css/main.css?v=2025010106">
    <link rel="stylesheet" href="/static/css/chat.css?v=2025010106">
    <link rel="stylesheet" href="/static/css/wallet.css?v=2025010106">
    
    <!-- Modern fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- SecretJS Library for Secret Network transactions -->
    <script src="https://unpkg.com/secretjs/dist/browser.js"></script>
    
    <!-- Favicon - using data URI for simple icon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚ö°</text></svg>">
    
    <!-- Meta tags for PWA -->
    <meta name="theme-color" content="#1a1b23">
    <meta name="description" content="SecretGPTee - AI Chat with Secret Network Integration">
</head>
<body>
    <!-- Main App Container -->
    <div id="app" class="app-container">
        
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <!-- Logo and Title -->
                <div class="header-left">
                    <div class="logo-icon">‚ö°</div>
                    <h1 class="app-title">SecretGPTee</h1>
                    <span class="version-badge">v1.0</span>
                </div>
                
                <!-- Header Actions -->
                <div class="header-right">
                    <!-- Keplr Wallet Connection -->
                    <div class="wallet-section">
                        <button id="wallet-connect-btn" class="wallet-btn keplr-btn" onclick="toggleWallet()">
                            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDJMMTMuMDkgOC4yNkwyMCA2TDE3Ljc0IDEzLjA5TDIyIDEyTDE0Ljc0IDEzLjA5TDEyIDIyTDkuMjYgMTMuMDlMMiAxMkw2LjI2IDEzLjA5TDQgNkwxMC45MSA4LjI2TDEyIDJaIiBmaWxsPSJjdXJyZW50Q29sb3IiLz4KPC9zdmc+" alt="Keplr" class="keplr-logo">
                            <span id="wallet-status">Connect Keplr</span>
                        </button>
                        <div id="wallet-info" class="wallet-info hidden">
                            <div class="wallet-address" id="wallet-address"></div>
                            <div class="wallet-balance" id="wallet-balance"></div>
                        </div>
                    </div>
                    
                    <!-- Settings Button -->
                    <button class="icon-btn settings-btn" onclick="toggleSettings()" title="Settings">
                        <i class="fas fa-cog"></i>
                    </button>
                    
                    <!-- Theme Toggle -->
                    <button class="icon-btn theme-btn" onclick="toggleTheme()" title="Toggle Theme">
                        <i class="fas fa-moon" id="theme-icon"></i>
                    </button>
                </div>
            </div>
        </header>
        
        <!-- Main Content Area -->
        <main class="main-content">
            
            <!-- Wallet Sidebar -->
            <aside id="wallet-sidebar" class="wallet-sidebar hidden">
                <div class="sidebar-header">
                    <h3>Wallet</h3>
                    <button class="close-btn" onclick="toggleWalletSidebar()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="sidebar-content">
                    <!-- Wallet Info Section -->
                    <div class="wallet-info-section">
                        <div class="wallet-address-display">
                            <label>Address</label>
                            <div class="address-box">
                                <span id="sidebar-wallet-address">Not Connected</span>
                                <button class="copy-btn" onclick="copyWalletAddress()" title="Copy Address">
                                    <i class="fas fa-copy"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Balance Section -->
                    <div class="balance-section">
                        <div class="balance-header">
                            <h4>Balances</h4>
                            <button class="refresh-btn" onclick="refreshBalance()" title="Refresh Balances">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                        </div>
                        
                        <!-- SCRT Balance (Primary) -->
                        <div class="token-balance primary-balance">
                            <div class="token-info">
                                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTYiIGZpbGw9IiMxYTFiMjMiLz4KPHBhdGggZD0iTTE2IDZMMTcuNTkgMTEuMDRMMjMgOEwyMC4wNCAxMy40MUwyNiAxNkwyMC4wNCAxNC40MUwxNiAyNkwxMS45NiAxNC40MUw2IDE2TDExLjk2IDEzLjQxTDkgOEwxNC40MSAxMS4wNEwxNiA2WiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+" alt="SCRT" class="token-icon">
                                <div class="token-details">
                                    <span class="token-symbol">SCRT</span>
                                    <span class="token-name">Secret</span>
                                </div>
                            </div>
                            <div class="token-amount">
                                <span id="scrt-balance" class="balance-value">0.000000</span>
                                <span class="balance-usd">$0.00</span>
                            </div>
                        </div>
                        
                        <!-- Future: Additional Tokens -->
                        <div id="additional-tokens" class="additional-tokens">
                            <!-- Additional token balances will be added here -->
                        </div>
                    </div>
                    
                    <!-- Actions Section -->
                    <div class="wallet-actions">
                        <button class="action-btn" onclick="showSendModal()">
                            <i class="fas fa-paper-plane"></i>
                            Send
                        </button>
                        <button class="action-btn" onclick="showReceiveModal()">
                            <i class="fas fa-qrcode"></i>
                            Receive
                        </button>
                    </div>
                </div>
            </aside>
            
            <!-- Chat Container -->
            <div class="chat-container">
                
                <!-- Messages Area -->
                <div id="messages" class="messages-area">
                    <!-- Welcome Message -->
                    <div class="message assistant-message welcome-message">
                        <div class="message-avatar">
                            <i class="fas fa-robot"></i>
                        </div>
                        <div class="message-content">
                            <div class="message-text">
                                <h3>Welcome to SecretGPTee! üîê</h3>
                                <p>I'm your AI assistant with <strong>Secret Network</strong> integration. I can help you with:</p>
                                <ul>
                                    <li>üí¨ General questions and conversations</li>
                                    <li>üîó Secret Network blockchain queries</li>
                                    <li>üí∞ Wallet balance checks and transactions</li>
                                    <li>üìä Live blockchain data and statistics</li>
                                </ul>
                                <p>Connect your <strong>Keplr wallet</strong> to unlock Secret Network features, or just start chatting!</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Input Area -->
                <div class="input-area">
                    <div class="input-container">
                        <div class="input-wrapper">
                            <textarea 
                                id="message-input" 
                                placeholder="Type your message... (or try 'What's the Secret Network status?')"
                                rows="1"
                                maxlength="4000"></textarea>
                            <div class="input-actions">
                                <button class="icon-btn attach-btn" title="Attach File" disabled>
                                    <i class="fas fa-paperclip"></i>
                                </button>
                                <button id="send-btn" class="send-btn" onclick="sendMessage()" title="Send Message">
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Input Footer -->
                        <div class="input-footer">
                            <span class="char-count">0 / 4000</span>
                            <div class="input-options">
                                <span class="temperature-display">Temperature: <span id="temp-value">0.7</span></span>
                                <button class="toggle-btn" onclick="toggleStreaming()" title="Toggle Streaming">
                                    <i class="fas fa-stream" id="streaming-icon"></i>
                                    <span id="streaming-text">Streaming</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
        </main>
        
        <!-- Settings Panel -->
        <div id="settings-panel" class="settings-panel hidden">
            <div class="settings-content">
                <div class="settings-header">
                    <h3>Settings</h3>
                    <button class="close-btn" onclick="toggleSettings()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="settings-body">
                    
                    <!-- Chat Settings -->
                    <div class="settings-section">
                        <h4>Chat Settings</h4>
                        
                        <div class="setting-item">
                            <label for="temperature-slider">Creativity (Temperature)</label>
                            <div class="slider-container">
                                <input type="range" id="temperature-slider" min="0" max="1" step="0.1" value="0.7">
                                <div class="slider-labels">
                                    <span>Conservative</span>
                                    <span>Balanced</span>
                                    <span>Creative</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="setting-item">
                            <label>
                                <input type="checkbox" id="enable-tools" checked>
                                Enable Blockchain Tools
                            </label>
                        </div>
                        
                        <div class="setting-item">
                            <label>
                                <input type="checkbox" id="enable-streaming" checked>
                                Real-time Streaming
                            </label>
                        </div>
                    </div>
                    
                    <!-- Wallet Settings -->
                    <div class="settings-section">
                        <h4>Wallet Settings</h4>
                        
                        <div class="setting-item">
                            <label>
                                <input type="checkbox" id="auto-connect-wallet">
                                Auto-connect wallet on visit
                            </label>
                        </div>
                        
                        <div class="setting-item">
                            <label for="default-gas">Default Gas Limit</label>
                            <input type="number" id="default-gas" value="200000" min="80000" max="2000000">
                        </div>
                    </div>
                    
                    <!-- Privacy Settings -->
                    <div class="settings-section">
                        <h4>Privacy Settings</h4>
                        
                        <div class="setting-item">
                            <label>
                                <input type="checkbox" id="local-storage-only" checked>
                                Store conversations locally only
                            </label>
                        </div>
                        
                        <div class="setting-item">
                            <label>
                                <input type="checkbox" id="privacy-mode">
                                Privacy mode (no conversation history)  
                            </label>
                        </div>
                    </div>
                    
                </div>
                
                <div class="settings-footer">
                    <button class="btn secondary" onclick="resetSettings()">Reset to Defaults</button>
                    <button class="btn primary" onclick="saveSettings()">Save Settings</button>
                </div>
            </div>
        </div>
        
        <!-- Loading Overlay -->
        <div id="loading-overlay" class="loading-overlay hidden">
            <div class="loading-spinner">
                <i class="fas fa-spinner fa-spin"></i>
                <span>Connecting to Secret Network...</span>
            </div>
        </div>
        
        <!-- Toast Notifications -->
        <div id="toast-container" class="toast-container"></div>
        
    </div>
    
    <!-- JavaScript -->
    <script src="/static/js/app.js?v=2025010106"></script>
    <script src="/static/js/chat.js?v=2025010106"></script>
    <script src="/static/js/wallet.js?v=2025081301"></script>
    <script src="/static/js/debug-wallet.js?v=2025010106"></script>
    <script src="/static/js/settings.js?v=2025010106"></script>
    
    <!-- Initialize App -->
    <script>
        // Initialize SecretGPTee app
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üîê SecretGPTee loaded successfully');
            
            // Initialize components
            initializeApp();
            initializeChat();
            initializeWallet();
            initializeSettings();
            
            // Load user settings
            loadUserSettings();
            
            // Auto-resize textarea
            const textarea = document.getElementById('message-input');
            textarea.addEventListener('input', autoResize);
            
            // Keyboard shortcuts
            textarea.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });
            
            // Character counter
            textarea.addEventListener('input', updateCharCount);
        });
    </script>
</body>
</html>