<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Attest AI - Understanding Attestation</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <style>
        /* Attest AI Web UI Styles - Trust & Security Theme */

:root {
    /* Attest AI Trust Color Palette */
    --primary-green: #2d5016;       /* Deep forest green for headers/accents */
    --secondary-green: #87a96b;     /* Sage green for status indicators */
    --warm-brown: #8b4513;          /* Rich earth brown for text/borders */
    --background-tan: #f5f5dc;      /* Light tan/cream for main background */
    --card-background: #f0f0e8;     /* Slightly darker tan for contrast cards */
    --accent-red: #cc5500;          /* Burnt orange-red for alerts/errors */
    --text-primary: #3e2723;        /* Dark brown for primary text */
    --text-secondary: #5d4037;      /* Medium brown for secondary text */
    --proof-yellow: #DAA520;        /* Earthy yellow/orange for proof generation */
    --proof-yellow-dark: #B8860B;   /* Darker version for hover states */
    
    /* Status Indicator Colors */
    --status-connected: #4caf50;    /* Green circle */
    --status-error: #f44336;        /* Red circle */
    --status-checking: #ff9800;     /* Amber circle (with pulse animation) */
    --status-unknown: #9e9e9e;      /* Gray circle */
    
    /* Additional earthy tones */
    --hover-tan: #ece8d9;           /* Darker tan for hover states */
    --border-brown: #d7cfc0;        /* Light brown for borders */
    --shadow-brown: rgba(139, 69, 19, 0.1); /* Brown shadow */
    
    /* Streaming Colors */
    --thinking-cyan: #00bcd4;       /* Cyan for thinking text */
    --streaming-gradient: linear-gradient(90deg, var(--secondary-green) 0%, var(--primary-green) 100%);
}

/* General Styles */
body {
    background: var(--background-tan);
    font-family: 'Inter', 'Segoe UI', 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
    color: var(--text-primary);
    min-height: 100vh;
    margin: 0;
    padding: 0;
}

.navbar-brand {
    font-weight: bold;
    font-size: 1.5rem;
    color: var(--primary-green) !important;
}

/* Navigation Bar */
.navbar-dark {
    background-color: var(--primary-green) !important;
}

.navbar-nav .nav-link {
    color: var(--background-tan) !important;
    font-weight: 500;
}

.navbar-nav .nav-link:hover {
    color: #ffffff !important;
}

/* Legacy Status Indicators (for attestation page) */
.status-indicator {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 1rem 1.5rem;
    border-radius: 8px;
    background: var(--card-background);
    box-shadow: 0 2px 4px var(--shadow-brown);
    border: 1px solid var(--border-brown);
    transition: all 0.3s ease;
    font-weight: 500;
    color: var(--text-primary);
    margin-bottom: 0.75rem;
}

.status-indicator:hover {
    background: var(--hover-tan);
    transform: translateY(-1px);
    box-shadow: 0 4px 8px var(--shadow-brown);
}

/* Status Circles - Professional Design */
.status-circle {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    display: inline-block;
    margin-right: 8px;
    transition: all 0.3s ease;
}

.status-connected { 
    background-color: var(--status-connected);
    box-shadow: 0 0 6px rgba(76, 175, 80, 0.4);
}

.status-error { 
    background-color: var(--status-error);
    box-shadow: 0 0 6px rgba(244, 67, 54, 0.4);
}

.status-checking { 
    background-color: var(--status-checking);
    animation: pulse 1.5s infinite;
    box-shadow: 0 0 6px rgba(255, 152, 0, 0.4);
}

.status-unknown { 
    background-color: var(--status-unknown);
    box-shadow: 0 0 6px rgba(158, 158, 158, 0.4);
}

/* Pulse animation for checking status */
@keyframes pulse {
    0% {
        opacity: 1;
        transform: scale(1);
    }
    50% {
        opacity: 0.6;
        transform: scale(1.1);
    }
    100% {
        opacity: 1;
        transform: scale(1);
    }
}

/* Attestation Box Styles */
.attestation-box {
    background: var(--card-background);
    border: 1px solid var(--border-brown);
    padding: 1.5rem;
    border-radius: 8px;
    margin-bottom: 1rem;
    text-align: center;
    transition: all 0.3s ease;
}

.attestation-box.verified {
    border-color: var(--status-connected);
    background: rgba(76, 175, 80, 0.05);
}

.attestation-box.error {
    border-color: var(--status-error);
    background: rgba(244, 67, 54, 0.05);
}

.attestation-details {
    font-family: 'Courier New', monospace;
    font-size: 0.875rem;
}

.attestation-details code {
    display: block;
    padding: 0.25rem 0.5rem;
    background-color: #f8f9fa;
    border: 1px solid #dee2e6;
    border-radius: 0.25rem;
    word-break: break-all;
}

/* Button Styles */
.btn-primary {
    background: var(--primary-green);
    border: none;
    color: var(--background-tan);
    font-weight: 600;
    border-radius: 4px;
    padding: 0.75rem 1.5rem;
    transition: all 0.3s ease;
    box-shadow: 0 2px 4px var(--shadow-brown);
}

.btn-primary:hover {
    background: #1e3a0f;
    transform: translateY(-1px);
    box-shadow: 0 4px 8px var(--shadow-brown);
    color: var(--background-tan);
}

.btn-primary:active {
    transform: translateY(0);
    box-shadow: 0 2px 4px var(--shadow-brown);
}

.btn-outline-primary {
    border: 2px solid var(--primary-green);
    color: var(--primary-green);
    background: transparent;
    font-weight: 500;
    border-radius: 4px;
    transition: all 0.3s ease;
}

.btn-outline-primary:hover {
    background: var(--primary-green);
    color: var(--background-tan);
    transform: translateY(-1px);
    box-shadow: 0 2px 4px var(--shadow-brown);
}

.btn-outline-dark {
    border: 2px solid var(--warm-brown);
    color: var(--warm-brown);
    background: transparent;
    font-weight: 500;
    border-radius: 4px;
    transition: all 0.3s ease;
}

.btn-outline-dark:hover {
    background: var(--warm-brown);
    color: var(--background-tan);
    transform: translateY(-1px);
    box-shadow: 0 2px 4px var(--shadow-brown);
}

/* Card Improvements */
.card {
    border: 1px solid var(--border-brown);
    border-radius: 8px;
    box-shadow: 0 2px 4px var(--shadow-brown);
    background: var(--card-background);
    transition: all 0.3s ease;
    overflow: hidden;
}

.card:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 8px var(--shadow-brown);
}

.card-header {
    background: var(--primary-green);
    color: var(--background-tan);
    border: none;
    padding: 1.25rem 1.5rem;
    font-weight: 600;
}

.card-header h5, .card-header h6 {
    margin: 0;
    color: var(--background-tan);
}

.card-body {
    padding: 1.5rem;
    background: var(--card-background);
}

/* Form Improvements */
.form-control, .form-select {
    border: 1px solid var(--warm-brown);
    border-radius: 4px;
    padding: 0.75rem 1rem;
    transition: all 0.3s ease;
    font-weight: 400;
    background: var(--background-tan);
    color: var(--text-primary);
}

.form-control:focus, .form-select:focus {
    border-color: var(--primary-green);
    box-shadow: 0 0 0 0.2rem rgba(45, 80, 22, 0.15);
    background: var(--background-tan);
    color: var(--text-primary);
}

.form-label {
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.5rem;
}

/* Header Styling */
.text-center h1 {
    color: var(--primary-green);
    font-weight: 800;
    margin-bottom: 0.5rem;
}

h1, h2, h3, h4, h5, h6 {
    font-weight: 700;
    color: var(--primary-green);
}

.lead {
    font-weight: 400;
    color: var(--text-secondary);
}

/* Progressive Disclosure Styles */
.drill-down-container {
    margin-bottom: 1rem;
}

.drill-down-level {
    padding: 0.75rem 1rem;
    margin-bottom: 0.5rem;
    border: 1px solid var(--border-brown);
    border-radius: 6px;
    background: var(--background-tan);
    transition: all 0.3s ease;
    cursor: pointer;
    position: relative;
}

.drill-down-level:hover {
    background: var(--hover-tan);
    border-color: var(--primary-green);
    transform: translateY(-1px);
    box-shadow: 0 2px 4px var(--shadow-brown);
}

.drill-down-level.active {
    border-color: var(--primary-green);
    background: rgba(45, 80, 22, 0.05);
}

.drill-down-level.locked {
    opacity: 0.6;
    cursor: not-allowed;
    background: var(--card-background);
}

.drill-down-level.locked:hover {
    transform: none;
    box-shadow: none;
    border-color: var(--border-brown);
    background: var(--card-background);
}

.level-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    font-weight: 600;
    color: var(--text-primary);
}

.level-icon {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.75rem;
    color: white;
    font-weight: bold;
    margin-right: 0.75rem;
}

.level-icon.level-1 { background: var(--status-connected); }
.level-icon.level-2 { background: var(--proof-yellow); }
.level-icon.level-3 { background: var(--warm-brown); }

.level-content {
    margin-top: 0.75rem;
    padding-top: 0.75rem;
    border-top: 1px solid var(--border-brown);
    color: var(--text-secondary);
    display: none;
}

.level-content.show {
    display: block;
    animation: fadeInDown 0.3s ease-in-out;
}

.expand-icon {
    transition: transform 0.3s ease;
    color: var(--text-secondary);
}

.expand-icon.rotated {
    transform: rotate(90deg);
}

.technical-data {
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;
    font-size: 0.8rem;
    background: var(--card-background);
    padding: 0.5rem;
    border-radius: 4px;
    border: 1px solid var(--border-brown);
    word-break: break-all;
    margin-top: 0.5rem;
}

.analogy-highlight {
    background: rgba(135, 169, 107, 0.1);
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    border-left: 3px solid var(--secondary-green);
    margin: 0.5rem 0;
    font-style: italic;
}

@keyframes fadeInDown {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Hash Generation Timeline Styles */

/* Vertical Timeline Styles */
.vertical-timeline {
    position: relative;
    max-width: 1000px;
    margin: 0 auto;
}

.vertical-timeline::before {
    content: '';
    position: absolute;
    left: 50%;
    top: 0;
    bottom: 0;
    width: 4px;
    background: linear-gradient(180deg, var(--primary-green), var(--secondary-green), var(--proof-yellow), var(--warm-brown), var(--status-connected));
    transform: translateX(-50%);
    border-radius: 2px;
}

.timeline-item {
    position: relative;
    margin-bottom: 3rem;
    cursor: pointer;
}

.timeline-item:nth-child(odd) .timeline-content {
    margin-left: 0;
    margin-right: 50%;
    padding-right: 2rem;
}

.timeline-item:nth-child(even) .timeline-content {
    margin-left: 50%;
    margin-right: 0;
    padding-left: 2rem;
}

.vertical-step-node {
    position: absolute;
    left: 50%;
    top: 20px;
    transform: translateX(-50%);
    width: 50px;
    height: 50px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.2rem;
    font-weight: bold;
    border: 4px solid white;
    box-shadow: 0 4px 8px var(--shadow-brown);
    transition: all 0.3s ease;
    z-index: 3;
}

.vertical-step-node.step-1 { background: var(--primary-green); }
.vertical-step-node.step-2 { background: var(--secondary-green); }
.vertical-step-node.step-3 { background: var(--proof-yellow); }
.vertical-step-node.step-4 { background: var(--warm-brown); }
.vertical-step-node.step-5 { background: var(--status-connected); }

.timeline-content {
    background: var(--card-background);
    border: 1px solid var(--border-brown);
    border-radius: 8px;
    padding: 1.5rem;
    box-shadow: 0 2px 4px var(--shadow-brown);
    transition: all 0.3s ease;
    position: relative;
}

.timeline-content:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px var(--shadow-brown);
}

.timeline-item:nth-child(odd) .timeline-content::before {
    content: '';
    position: absolute;
    right: -10px;
    top: 25px;
    width: 0;
    height: 0;
    border: 10px solid transparent;
    border-left-color: var(--card-background);
}

.timeline-item:nth-child(even) .timeline-content::before {
    content: '';
    position: absolute;
    left: -10px;
    top: 25px;
    width: 0;
    height: 0;
    border: 10px solid transparent;
    border-right-color: var(--card-background);
}

.timeline-title {
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.5rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.timeline-description {
    color: var(--text-secondary);
    margin-bottom: 1rem;
    line-height: 1.5;
}

.hash-info {
    background: rgba(218, 165, 32, 0.1);
    border-left: 3px solid var(--proof-yellow);
    padding: 0.75rem;
    border-radius: 0 4px 4px 0;
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;
    font-size: 0.85rem;
}

.hash-algorithm {
    font-weight: 600;
    color: var(--proof-yellow-dark);
}

.hash-output {
    color: var(--text-secondary);
    margin-top: 0.25rem;
}

/* Mobile responsiveness for timeline */
@media (max-width: 768px) {
    .vertical-timeline::before {
        left: 30px;
    }

    .timeline-item:nth-child(odd) .timeline-content,
    .timeline-item:nth-child(even) .timeline-content {
        margin-left: 60px;
        margin-right: 0;
        padding-left: 1rem;
        padding-right: 1rem;
    }

    .vertical-step-node {
        left: 30px;
        transform: translateX(-50%);
        width: 40px;
        height: 40px;
        font-size: 1rem;
    }

    .timeline-item:nth-child(odd) .timeline-content::before,
    .timeline-item:nth-child(even) .timeline-content::before {
        left: -10px;
        border-right-color: var(--card-background);
        border-left-color: transparent;
    }

    .timeline-content {
        padding: 1rem;
    }

    .timeline-title {
        font-size: 0.95rem;
        gap: 0.25rem;
    }

    .timeline-description {
        font-size: 0.9rem;
    }

    .hash-info {
        font-size: 0.8rem;
        padding: 0.5rem;
    }
}

/* Verification Process Styles */
.cert-chain {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1rem;
    margin: 1.5rem 0;
    padding: 1rem;
    background: var(--card-background);
    border-radius: 8px;
    border: 1px solid var(--border-brown);
    flex-wrap: wrap;
}

.cert-level {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
    padding: 1rem;
    background: var(--background-tan);
    border: 2px solid var(--border-brown);
    border-radius: 8px;
    min-width: 120px;
    text-align: center;
    transition: all 0.3s ease;
}

.cert-level:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px var(--shadow-brown);
}

.cert-level.root {
    border-color: var(--primary-green);
    background: rgba(45, 80, 22, 0.05);
}

.cert-level.intermediate {
    border-color: var(--secondary-green);
    background: rgba(135, 169, 107, 0.05);
}

.cert-level.leaf {
    border-color: var(--proof-yellow);
    background: rgba(218, 165, 32, 0.05);
}

.cert-level i {
    font-size: 1.5rem;
    color: var(--primary-green);
}

.cert-level div {
    font-weight: 600;
    color: var(--text-primary);
    margin: 0;
}

.cert-level small {
    color: var(--text-secondary);
    font-size: 0.75rem;
}

.cert-arrow {
    display: flex;
    align-items: center;
    color: var(--text-secondary);
    font-size: 1.2rem;
}

.verification-step {
    display: flex;
    gap: 1rem;
    margin-bottom: 1.5rem;
    padding: 1rem;
    background: var(--card-background);
    border-radius: 8px;
    border: 1px solid var(--border-brown);
    transition: all 0.3s ease;
}

.verification-step:hover {
    transform: translateY(-1px);
    box-shadow: 0 2px 4px var(--shadow-brown);
}

.step-number {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: var(--primary-green);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 1.1rem;
    flex-shrink: 0;
}

.step-content {
    flex: 1;
}

.step-title {
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.5rem;
    font-size: 1.1rem;
}

.step-description {
    color: var(--text-secondary);
    line-height: 1.5;
}

.expected-values, .actual-values {
    background: var(--card-background);
    border: 1px solid var(--border-brown);
    border-radius: 8px;
    padding: 1rem;
    margin-bottom: 1rem;
}

.expected-values h6, .actual-values h6 {
    color: var(--text-primary);
    margin-bottom: 0.75rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.code-block {
    background: var(--background-tan);
    border: 1px solid var(--warm-brown);
    border-radius: 4px;
    padding: 0.75rem;
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;
    font-size: 0.85rem;
    white-space: pre-line;
    overflow-x: auto;
    margin: 0.5rem 0;
}

.code-comment {
    color: var(--text-secondary);
    font-style: italic;
}

.code-string {
    color: var(--primary-green);
    font-weight: 500;
}

.comparison-result {
    margin-top: 1.5rem;
    padding: 1rem;
    border-radius: 8px;
    text-align: center;
    font-weight: 500;
}

.comparison-result.result-match {
    background: rgba(76, 175, 80, 0.1);
    border: 1px solid var(--status-connected);
    color: var(--status-connected);
}

.comparison-result.result-mismatch {
    background: rgba(244, 67, 54, 0.1);
    border: 1px solid var(--status-error);
    color: var(--status-error);
}

.comparison-result i {
    margin-right: 0.5rem;
}

/* Mobile responsiveness for verification */
@media (max-width: 768px) {
    .cert-chain {
        flex-direction: column;
        gap: 0.5rem;
    }

    .cert-arrow {
        transform: rotate(90deg);
    }

    .cert-level {
        min-width: 100px;
        padding: 0.75rem;
    }

    .verification-step {
        flex-direction: column;
        gap: 0.75rem;
    }

    .step-number {
        align-self: flex-start;
        width: 35px;
        height: 35px;
        font-size: 1rem;
    }

    .code-block {
        font-size: 0.8rem;
        padding: 0.5rem;
    }
}
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="preview.html">
                <i class="fas fa-shield-alt"></i> Attest AI
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="preview.html">
                            <i class="fas fa-comments"></i> Chat
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="attestation-preview.html">
                            <i class="fas fa-certificate"></i> About Attestation
                        </a>
                    </li>
                </ul>
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <span class="navbar-text">
                            <i class="fas fa-lock"></i> Confidential Computing
                        </span>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container mt-4">
        <div class="row">
            <div class="col-lg-10 mx-auto">
                <!-- Header -->
                <div class="text-center mb-4">
                    <h1><i class="fas fa-certificate"></i> Understanding Attestation</h1>
                    <p class="lead">Learn how TEE attestation protects your secure computing environment</p>
                    <div class="mt-3">
                        <a href="preview.html" class="btn btn-primary">
                            <i class="fas fa-arrow-left"></i> Back to Chat
                        </a>
                    </div>
                </div>



                <!-- Attestation Overview -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h5><i class="fas fa-info-circle"></i> What is Attestation?</h5>
                    </div>
                    <div class="card-body">
                        <p class="lead">Attestation is like a digital seal of authenticity for secure systems. Just as a notary verifies documents, attestation verifies that a system is running exactly the code it claims to be running, without any tampering or modifications.</p>
                        
                        <div class="row mt-4">
                        <div class="col-md-6">
                        <h6><i class="fas fa-lock"></i> Why Attestation Matters</h6>
                        <ul class="list-unstyled">
                        <li><strong>Trust:</strong> Know your system hasn't been tampered with</li>
                        <li><strong>Privacy:</strong> Ensure your data stays confidential</li>
                        <li><strong>Integrity:</strong> Verify the system runs legitimate code</li>
                        <li><strong>Compliance:</strong> Meet security requirements</li>
                        <li><strong>Auditability:</strong> Complete verification history</li>
                        </ul>
                        </div>
                        <div class="col-md-6">
                        <h6><i class="fas fa-microchip"></i> How It Works</h6>
                        <ul class="list-unstyled">
                        <li><strong>TEE Protection:</strong> Hardware-level security</li>
                        <li><strong>Cryptographic Proof:</strong> Signatures that prove the code hasn't been altered</li>
                        <li><strong>Remote Attestation:</strong> Receive verifiable evidence that the system is running in a trusted state</li>
                        <li><strong>Sealed Execution:</strong> Code runs in protected isolation</li>
                        </ul>
                        </div>
                        </div>
                    </div>
                </div>

                <!-- Dual VM Architecture -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h5><i class="fas fa-server"></i> Dual VM Architecture</h5>
                    </div>
                    <div class="card-body">
                        <div class="alert alert-success">
                            <i class="fas fa-check-circle"></i>
                            <strong>Double Layer of Trust:</strong> Attest AI uses two independent VMs - one for the interface and one for AI processing. Both are verified separately, creating enhanced security.
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="attestation-box" id="self-vm-box">
                                    <h6><i class="fas fa-shield-alt"></i> Attest AI VM</h6>
                                    <p class="small text-muted">Handles user interface and proof generation</p>
                                    <div class="status-indicator">
                                        <span class="status-circle status-unknown" id="self-vm-status"></span>
                                        <span id="self-vm-text">Not Verified</span>
                                    </div>
                                    <button class="btn btn-outline-primary btn-sm mt-2" id="verify-self-vm">
                                        <i class="fas fa-sync"></i> Verify Now
                                    </button>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="attestation-box" id="secretai-vm-box">
                                    <h6><i class="fas fa-brain"></i> Secret AI VM</h6>
                                    <p class="small text-muted">Processes AI requests securely</p>
                                    <div class="status-indicator">
                                        <span class="status-circle status-unknown" id="secretai-vm-status"></span>
                                        <span id="secretai-vm-text">Not Verified</span>
                                    </div>
                                    <button class="btn btn-outline-primary btn-sm mt-2" id="verify-secretai-vm">
                                        <i class="fas fa-sync"></i> Verify Now
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="text-center mt-3">
                            <button class="btn btn-primary" id="verify-both-vms">
                                <i class="fas fa-shield-alt"></i> Verify Both VMs
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Attestation Details -->
                <div class="row">
                    <!-- Self VM Attestation -->
                    <div class="col-lg-6 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h6><i class="fas fa-shield-alt"></i> Attest AI VM Details</h6>
                            </div>
                            <div class="card-body">
                                <div id="self-vm-details" class="attestation-details" style="display: none;">
                                    <div class="mb-2">
                                        <strong>MRTD:</strong>
                                        <code class="d-block" id="self-mrtd">-</code>
                                    </div>
                                    <div class="mb-2">
                                        <strong>RTMR0:</strong>
                                        <code class="d-block" id="self-rtmr0">-</code>
                                    </div>
                                    <div class="mb-2">
                                        <strong>RTMR1:</strong>
                                        <code class="d-block" id="self-rtmr1">-</code>
                                    </div>
                                    <div class="mb-2">
                                        <strong>RTMR2:</strong>
                                        <code class="d-block" id="self-rtmr2">-</code>
                                    </div>
                                    <div class="mb-2">
                                        <strong>RTMR3:</strong>
                                        <code class="d-block" id="self-rtmr3">-</code>
                                    </div>
                                    <div class="mb-2">
                                        <strong>Report Data:</strong>
                                        <code class="d-block small" id="self-report-data">-</code>
                                    </div>
                                    <div class="mb-2">
                                        <strong>Certificate Fingerprint:</strong>
                                        <code class="d-block small" id="self-cert-fingerprint">-</code>
                                    </div>
                                    <div class="mb-2">
                                        <strong>Timestamp:</strong>
                                        <span id="self-timestamp">-</span>
                                    </div>
                                </div>
                                <div id="self-vm-loading" class="text-center" style="display: none;">
                                    <div class="spinner-border spinner-border-sm" role="status"></div>
                                    <span class="ms-2">Loading attestation...</span>
                                </div>
                                <div id="self-vm-error" class="text-danger" style="display: none;"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Secret AI VM Attestation -->
                    <div class="col-lg-6 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h6><i class="fas fa-brain"></i> Secret AI VM Details</h6>
                            </div>
                            <div class="card-body">
                                <div id="secretai-vm-details" class="attestation-details" style="display: none;">
                                    <div class="mb-2">
                                        <strong>MRTD:</strong>
                                        <code class="d-block" id="secretai-mrtd">-</code>
                                    </div>
                                    <div class="mb-2">
                                        <strong>RTMR0:</strong>
                                        <code class="d-block" id="secretai-rtmr0">-</code>
                                    </div>
                                    <div class="mb-2">
                                        <strong>RTMR1:</strong>
                                        <code class="d-block" id="secretai-rtmr1">-</code>
                                    </div>
                                    <div class="mb-2">
                                        <strong>RTMR2:</strong>
                                        <code class="d-block" id="secretai-rtmr2">-</code>
                                    </div>
                                    <div class="mb-2">
                                        <strong>RTMR3:</strong>
                                        <code class="d-block" id="secretai-rtmr3">-</code>
                                    </div>
                                    <div class="mb-2">
                                        <strong>Report Data:</strong>
                                        <code class="d-block small" id="secretai-report-data">-</code>
                                    </div>
                                    <div class="mb-2">
                                        <strong>Certificate Fingerprint:</strong>
                                        <code class="d-block small" id="secretai-cert-fingerprint">-</code>
                                    </div>
                                    <div class="mb-2">
                                        <strong>Timestamp:</strong>
                                        <span id="secretai-timestamp">-</span>
                                    </div>
                                </div>
                                <div id="secretai-vm-loading" class="text-center" style="display: none;">
                                    <div class="spinner-border spinner-border-sm" role="status"></div>
                                    <span class="ms-2">Loading attestation...</span>
                                </div>
                                <div id="secretai-vm-error" class="text-danger" style="display: none;"></div>
                            </div>
                        </div>
                    </div>
                </div>

        <!-- How Attestation Hashes Are Created -->
        <div class="card mb-4" id="hash-generation-section">
            <div class="card-header">
                <h5><i class="fas fa-calculator"></i> How Attestation Hashes Are Created</h5>
            </div>
            <div class="card-body">
                <!-- Compact Explainer -->
                <div id="hash-explainer-compact">
                    <p class="lead">Attestation hashes are cryptographic fingerprints created at each stage of your VM's lifecycle - from hardware boot to runtime monitoring.</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <h6><i class="fas fa-microchip"></i> Boot-Time Creation</h6>
                            <p class="mb-2">Intel TDX hardware measures each component as it loads:</p>
                            <ul class="list-unstyled">
                                <li><i class="fas fa-arrow-right text-primary"></i> Hardware → Firmware → OS → Applications</li>
                                <li><i class="fas fa-arrow-right text-primary"></i> Each step extends the cryptographic chain</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h6><i class="fas fa-heartbeat"></i> Runtime Updates</h6>
                            <p class="mb-2">System continuously updates hash values:</p>
                            <ul class="list-unstyled">
                                <li><i class="fas fa-arrow-right text-success"></i> MRTD: Fixed at boot (like a birth certificate)</li>
                                <li><i class="fas fa-arrow-right text-success"></i> RTMR: Live updates (like a security camera)</li>
                            </ul>
                        </div>
                    </div>

                    <div class="text-center">
                        <button class="btn btn-primary" onclick="expandHashTimeline()">
                            <i class="fas fa-plus-circle"></i> Show Detailed Timeline Process
                        </button>
                        <small class="d-block mt-2 text-muted">See the step-by-step hash generation process with technical details</small>
                    </div>
                </div>

                <!-- Expanded Timeline Section (Hidden by Default) -->
                <div id="hash-timeline-expanded" style="display: none;">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <div>
                            <h6 class="mb-1">Step-by-Step Hash Generation Process</h6>
                            <small class="text-muted">Click any step to see technical implementation details</small>
                        </div>
                        <div>
                            <button class="btn btn-outline-secondary btn-sm" onclick="collapseHashTimeline()">
                                <i class="fas fa-times"></i> Close
                            </button>
                        </div>
                    </div>

                    <!-- Vertical Timeline -->
                    <div class="vertical-timeline">
                        <!-- Step 1: Hardware Boot -->
                        <div class="timeline-item" onclick="toggleVerticalDetails(1)">
                            <div class="vertical-step-node step-1">
                                <i class="fas fa-microchip"></i>
                            </div>
                            <div class="timeline-content">
                                <div class="timeline-title">
                                    <i class="fas fa-microchip"></i>
                                    Hardware Boot & TDX Initialization
                                </div>
                                <div class="timeline-description">
                                    Intel TDX hardware validates itself and creates the foundation for all future measurements. This is like the "birth certificate" of your secure environment.
                                </div>
                                <div class="hash-info" id="v-details-1" style="display: none;">
                                    <div class="hash-algorithm">Process: Hardware-validated security initialization</div>
                                    <div class="hash-output">Creates cryptographic foundation for MRTD calculation</div>
                                    <div style="margin-top: 0.5rem;"><strong>Measured Components:</strong></div>
                                    <ul style="margin: 0.25rem 0 0 1rem; font-size: 0.8rem;">
                                        <li>CPU microcode signatures</li>
                                        <li>TDX firmware version and configuration</li>
                                        <li>Hardware security features and capabilities</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Step 2: Firmware Load -->
                        <div class="timeline-item" onclick="toggleVerticalDetails(2)">
                            <div class="vertical-step-node step-2">
                                <i class="fas fa-cog"></i>
                            </div>
                            <div class="timeline-content">
                                <div class="timeline-title">
                                    <i class="fas fa-cog"></i>
                                    Firmware Load & Bootloader Measurement
                                </div>
                                <div class="timeline-description">
                                    UEFI firmware and bootloader components are measured using SHA-384 hashing. Each component's binary data contributes to the growing MRTD value.
                                </div>
                                <div class="hash-info" id="v-details-2" style="display: none;">
                                    <div class="hash-algorithm">Algorithm: SHA-384 cryptographic hashing</div>
                                    <div class="hash-output">MRTD = SHA384(hardware_foundation + firmware_binaries + bootloader_code)</div>
                                    <div style="margin-top: 0.5rem;"><strong>Measured Components:</strong></div>
                                    <ul style="margin: 0.25rem 0 0 1rem; font-size: 0.8rem;">
                                        <li>UEFI firmware binary and configuration</li>
                                        <li>Bootloader executable (GRUB, systemd-boot, etc.)</li>
                                        <li>Boot configuration and security policies</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Step 3: OS Launch -->
                        <div class="timeline-item" onclick="toggleVerticalDetails(3)">
                            <div class="vertical-step-node step-3">
                                <i class="fas fa-desktop"></i>
                            </div>
                            <div class="timeline-content">
                                <div class="timeline-title">
                                    <i class="fas fa-desktop"></i>
                                    Operating System Launch & MRTD Finalization
                                </div>
                                <div class="timeline-description">
                                    The kernel and core OS components complete the MRTD calculation. This creates your VM's unique fingerprint that proves its integrity from boot.
                                </div>
                                <div class="hash-info" id="v-details-3" style="display: none;">
                                    <div class="hash-algorithm">Algorithm: SHA-384 final MRTD calculation + RTMR0 initialization</div>
                                    <div class="hash-output">MRTD finalized (immutable), RTMR0 = SHA384(kernel_image + initrd + system_config)</div>
                                    <div style="margin-top: 0.5rem;"><strong>Measured Components:</strong></div>
                                    <ul style="margin: 0.25rem 0 0 1rem; font-size: 0.8rem;">
                                        <li>Linux kernel binary and command line</li>
                                        <li>Initial ramdisk (initrd/initramfs)</li>
                                        <li>Core system configuration files</li>
                                        <li>Essential system services and modules</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Step 4: Application Start -->
                        <div class="timeline-item" onclick="toggleVerticalDetails(4)">
                            <div class="vertical-step-node step-4">
                                <i class="fas fa-rocket"></i>
                            </div>
                            <div class="timeline-content">
                                <div class="timeline-title">
                                    <i class="fas fa-rocket"></i>
                                    Application Launch & RTMR Updates
                                </div>
                                <div class="timeline-description">
                                    Applications and services start up, with each component extending the appropriate RTMR register. This tracks what software is actually running.
                                </div>
                                <div class="hash-info" id="v-details-4" style="display: none;">
                                    <div class="hash-algorithm">Algorithm: SHA-384 extending (RTMR_new = SHA384(RTMR_current + new_measurement))</div>
                                    <div class="hash-output">RTMR1 tracks applications, RTMR2 tracks configs, RTMR3 tracks custom data</div>
                                    <div style="margin-top: 0.5rem;"><strong>Measured Components:</strong></div>
                                    <ul style="margin: 0.25rem 0 0 1rem; font-size: 0.8rem;">
                                        <li>Application binaries (AttestAI, SecretAI, etc.)</li>
                                        <li>Shared libraries and dependencies</li>
                                        <li>Application configuration files</li>
                                        <li>Security policies and network settings</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Step 5: Runtime Monitoring -->
                        <div class="timeline-item" onclick="toggleVerticalDetails(5)">
                            <div class="vertical-step-node step-5">
                                <i class="fas fa-heartbeat"></i>
                            </div>
                            <div class="timeline-content">
                                <div class="timeline-title">
                                    <i class="fas fa-heartbeat"></i>
                                    Runtime Monitoring & Continuous Updates
                                </div>
                                <div class="timeline-description">
                                    The system continuously monitors and measures runtime events, extending RTMR values in real-time. Any changes are immediately reflected in the attestation.
                                </div>
                                <div class="hash-info" id="v-details-5" style="display: none;">
                                    <div class="hash-algorithm">Algorithm: Live SHA-384 extending for each measured event</div>
                                    <div class="hash-output">RTMRx = SHA384(current_value + event_data + timestamp)</div>
                                    <div style="margin-top: 0.5rem;"><strong>Measured Events:</strong></div>
                                    <ul style="margin: 0.25rem 0 0 1rem; font-size: 0.8rem;">
                                        <li>System calls and process executions</li>
                                        <li>Configuration file modifications</li>
                                        <li>Network connection events</li>
                                        <li>Security policy changes</li>
                                        <li>Custom application measurements</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

                <!-- Technical Details -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h5><i class="fas fa-cogs"></i> Technical Components Explained</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <h6><i class="fas fa-fingerprint"></i> Measurement Values</h6>
                                <div class="list-group list-group-flush">
                                    <div class="list-group-item">
                                        <strong>MRTD</strong> <span class="badge bg-primary">Measurement of Trust Domain</span>
                                        <p class="small mt-1 mb-0">A unique fingerprint of the VM's initial state - like a birth certificate for the secure environment</p>
                                    </div>
                                    <div class="list-group-item">
                                        <strong>RTMR0-3</strong> <span class="badge bg-info">Runtime Measurement Registers</span>
                                        <p class="small mt-1 mb-0">Real-time health checks that monitor the VM hasn't been compromised during operation</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <h6><i class="fas fa-shield-alt"></i> Security Features</h6>
                                <div class="list-group list-group-flush">
                                    <div class="list-group-item">
                                        <strong>Report Data</strong> <span class="badge bg-success">Instance Proof</span>
                                        <p class="small mt-1 mb-0">Custom information proving this specific VM instance is authentic</p>
                                    </div>
                                    <div class="list-group-item">
                                        <strong>Certificate Fingerprint</strong> <span class="badge bg-warning">MITM Protection</span>
                                        <p class="small mt-1 mb-0">Ensures you're talking to the right VM, preventing impersonation attacks</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Progressive Disclosure Documentation -->
        <div class="card mb-4">
            <div class="card-header">
                <h5><i class="fas fa-graduation-cap"></i> Understanding Your Attestation</h5>
            </div>
            <div class="card-body">
                <p class="mb-4">Click each level to learn more about how your secure environment is protected:</p>
                
                <!-- MRTD Explanation -->
                <div class="drill-down-container">
                    <h6><i class="fas fa-fingerprint"></i> VM Integrity Verification (MRTD)</h6>
                    
                    <div class="drill-down-level" data-level="1" data-topic="mrtd">
                        <div class="level-header">
                            <div class="d-flex align-items-center">
                                <div class="level-icon level-1">1</div>
                                <span>VM integrity verified ✓</span>
                            </div>
                            <i class="fas fa-chevron-right expand-icon"></i>
                        </div>
                        <div class="level-content">
                            Your virtual machine has been verified as secure and unmodified.
                        </div>
                    </div>
                    
                    <div class="drill-down-level locked" data-level="2" data-topic="mrtd">
                        <div class="level-header">
                            <div class="d-flex align-items-center">
                                <div class="level-icon level-2">2</div>
                                <span>Like a tamper-evident seal - proves nothing was modified since startup</span>
                            </div>
                            <i class="fas fa-chevron-right expand-icon"></i>
                        </div>
                        <div class="level-content">
                            <div class="analogy-highlight">
                                <i class="fas fa-shield-alt"></i> <strong>Think of it like:</strong> A tamper-evident seal on a product package. Just as you can tell if someone opened a sealed envelope, MRTD lets you verify that no one has modified the system since it was securely started.
                            </div>
                            <p>This cryptographic measurement is taken at the moment the virtual machine boots up, creating a unique fingerprint that would change if anyone tried to modify the system.</p>
                        </div>
                    </div>
                    
                    <div class="drill-down-level locked" data-level="3" data-topic="mrtd">
                        <div class="level-header">
                            <div class="d-flex align-items-center">
                                <div class="level-icon level-3">3</div>
                                <span>MRTD hash is your VM's unique fingerprint from secure boot</span>
                            </div>
                            <i class="fas fa-chevron-right expand-icon"></i>
                        </div>
                        <div class="level-content">
                            <p><strong>Technical Details:</strong> The Measurement of Trust Domain (MRTD) is a SHA-384 hash that includes:</p>
                            <ul>
                                <li>Initial VM configuration and firmware</li>
                                <li>Bootloader and operating system components</li>
                                <li>Application binaries and dependencies</li>
                            </ul>
                            <div class="technical-data" id="current-mrtd">
                                Click "Verify" above to see the actual MRTD value
                            </div>
                            <p class="mt-2"><small>This measurement is computed by Intel TDX hardware and cannot be forged or manipulated by software.</small></p>
                        </div>
                    </div>
                </div>

                <!-- Runtime Monitoring -->
                <div class="drill-down-container">
                    <h6><i class="fas fa-heartbeat"></i> Runtime Security Monitoring (RTMR)</h6>
                    
                    <div class="drill-down-level" data-level="1" data-topic="rtmr">
                        <div class="level-header">
                            <div class="d-flex align-items-center">
                                <div class="level-icon level-1">1</div>
                                <span>Runtime security active ✓</span>
                            </div>
                            <i class="fas fa-chevron-right expand-icon"></i>
                        </div>
                        <div class="level-content">
                            Continuous monitoring ensures your system remains secure while running.
                        </div>
                    </div>
                    
                    <div class="drill-down-level locked" data-level="2" data-topic="rtmr">
                        <div class="level-header">
                            <div class="d-flex align-items-center">
                                <div class="level-icon level-2">2</div>
                                <span>Like a security camera system - continuously monitors for any changes</span>
                            </div>
                            <i class="fas fa-chevron-right expand-icon"></i>
                        </div>
                        <div class="level-content">
                            <div class="analogy-highlight">
                                <i class="fas fa-video"></i> <strong>Think of it like:</strong> A bank's security system that continuously monitors for unauthorized access. RTMR values act like security cameras, detecting any unauthorized changes to the system while it's running.
                            </div>
                            <p>These measurements update in real-time, so if anything suspicious happens, you'd know immediately.</p>
                        </div>
                    </div>
                    
                    <div class="drill-down-level locked" data-level="3" data-topic="rtmr">
                        <div class="level-header">
                            <div class="d-flex align-items-center">
                                <div class="level-icon level-3">3</div>
                                <span>RTMR registers track all system activities and modifications</span>
                            </div>
                            <i class="fas fa-chevron-right expand-icon"></i>
                        </div>
                        <div class="level-content">
                            <p><strong>Technical Details:</strong> Runtime Measurement Registers (RTMR 0-3) each track different aspects:</p>
                            <ul>
                                <li><strong>RTMR0:</strong> Operating system and kernel activities</li>
                                <li><strong>RTMR1:</strong> Application-level changes and updates</li>
                                <li><strong>RTMR2:</strong> Configuration and policy modifications</li>
                                <li><strong>RTMR3:</strong> Custom measurements and attestation data</li>
                            </ul>
                            <div class="technical-data" id="current-rtmr">
                                Click "Verify" above to see the actual RTMR values
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Report Data Explanation -->
                <div class="drill-down-container">
                    <h6><i class="fas fa-file-signature"></i> Report Data (Instance Proof)</h6>
                    
                    <div class="drill-down-level" data-level="1" data-topic="report">
                        <div class="level-header">
                            <div class="d-flex align-items-center">
                                <div class="level-icon level-1">1</div>
                                <span>Instance proof verified ✓</span>
                            </div>
                            <i class="fas fa-chevron-right expand-icon"></i>
                        </div>
                        <div class="level-content">
                            Custom data proving this specific VM instance is authentic and unmodified.
                        </div>
                    </div>
                    
                    <div class="drill-down-level locked" data-level="2" data-topic="report">
                        <div class="level-header">
                            <div class="d-flex align-items-center">
                                <div class="level-icon level-2">2</div>
                                <span>Like a unique serial number - proves this exact instance</span>
                            </div>
                            <i class="fas fa-chevron-right expand-icon"></i>
                        </div>
                        <div class="level-content">
                            <div class="analogy-highlight">
                                <i class="fas fa-barcode"></i> <strong>Think of it like:</strong> A unique serial number on a piece of hardware. Just as each device has a specific serial number to identify it, Report Data contains custom information that proves you're talking to this exact VM instance.
                            </div>
                            <p>This data can include application-specific identifiers, configuration hashes, or other custom proof data that helps verify the VM's identity and state.</p>
                        </div>
                    </div>
                    
                    <div class="drill-down-level locked" data-level="3" data-topic="report">
                        <div class="level-header">
                            <div class="d-flex align-items-center">
                                <div class="level-icon level-3">3</div>
                                <span>Custom attestation data embedded during VM creation</span>
                            </div>
                            <i class="fas fa-chevron-right expand-icon"></i>
                        </div>
                        <div class="level-content">
                            <p><strong>Technical Details:</strong> Report Data is a 64-byte field that can contain:</p>
                            <ul>
                                <li>Application-specific identifiers (like "AttestAI")</li>
                                <li>Configuration or policy hashes</li>
                                <li>Nonces for replay attack prevention</li>
                                <li>Custom challenge-response data</li>
                            </ul>
                            <div class="technical-data" id="current-report">
                                Click "Verify" above to see the actual Report Data
                            </div>
                            <p class="mt-2"><small>This data is embedded during attestation generation and cannot be modified without invalidating the cryptographic signature.</small></p>
                        </div>
                    </div>
                </div>

                <!-- Certificate Fingerprint Explanation -->
                <div class="drill-down-container">
                    <h6><i class="fas fa-certificate"></i> Certificate Fingerprint (MITM Protection)</h6>
                    
                    <div class="drill-down-level" data-level="1" data-topic="cert">
                        <div class="level-header">
                            <div class="d-flex align-items-center">
                                <div class="level-icon level-1">1</div>
                                <span>Certificate verified ✓</span>
                            </div>
                            <i class="fas fa-chevron-right expand-icon"></i>
                        </div>
                        <div class="level-content">
                            Cryptographic proof that you're communicating with the authentic VM, not an imposter.
                        </div>
                    </div>
                    
                    <div class="drill-down-level locked" data-level="2" data-topic="cert">
                        <div class="level-header">
                            <div class="d-flex align-items-center">
                                <div class="level-icon level-2">2</div>
                                <span>Like an ID card photo - prevents identity theft</span>
                            </div>
                            <i class="fas fa-chevron-right expand-icon"></i>
                        </div>
                        <div class="level-content">
                            <div class="analogy-highlight">
                                <i class="fas fa-id-card"></i> <strong>Think of it like:</strong> The photo on an ID card that prevents someone else from using your identity. The certificate fingerprint ensures that no one can impersonate the VM or intercept your communications.
                            </div>
                            <p>This prevents man-in-the-middle attacks where an attacker might try to pose as the legitimate VM to steal your data or provide false responses.</p>
                        </div>
                    </div>
                    
                    <div class="drill-down-level locked" data-level="3" data-topic="cert">
                        <div class="level-header">
                            <div class="d-flex align-items-center">
                                <div class="level-icon level-3">3</div>
                                <span>SHA-256 hash of the VM's TLS certificate</span>
                            </div>
                            <i class="fas fa-chevron-right expand-icon"></i>
                        </div>
                        <div class="level-content">
                            <p><strong>Technical Details:</strong> The Certificate Fingerprint is a SHA-256 hash of:</p>
                            <ul>
                                <li>The VM's TLS/SSL certificate public key</li>
                                <li>Certificate metadata and extensions</li>
                                <li>Issuer and validity information</li>
                            </ul>
                            <div class="technical-data" id="current-cert">
                                Click "Verify" above to see the actual Certificate Fingerprint
                            </div>
                            <p class="mt-2"><small>This fingerprint is cryptographically bound to the attestation, ensuring the certificate cannot be swapped or modified.</small></p>
                        </div>
                    </div>
                </div>

                <!-- Infrastructure Transparency -->
                <div class="drill-down-container">
                    <h6><i class="fas fa-code-branch"></i> Infrastructure Transparency</h6>
                    
                    <div class="drill-down-level" data-level="1" data-topic="infra">
                        <div class="level-header">
                            <div class="d-flex align-items-center">
                                <div class="level-icon level-1">1</div>
                                <span>Running verified code ✓</span>
                            </div>
                            <i class="fas fa-chevron-right expand-icon"></i>
                        </div>
                        <div class="level-content">
                            The system is running verified, unmodified code from a trusted source.
                        </div>
                    </div>
                    
                    <div class="drill-down-level locked" data-level="2" data-topic="infra">
                        <div class="level-header">
                            <div class="d-flex align-items-center">
                                <div class="level-icon level-2">2</div>
                                <span>Like checking the software version and publisher before installing</span>
                            </div>
                            <i class="fas fa-chevron-right expand-icon"></i>
                        </div>
                        <div class="level-content">
                            <div class="analogy-highlight">
                                <i class="fas fa-download"></i> <strong>Think of it like:</strong> Checking that an app download is from the official App Store and hasn't been modified. You can verify the exact version and that it came from the legitimate developer.
                            </div>
                            <p>This transparency lets you trace the running code back to its source and verify it matches what was intended to run.</p>
                        </div>
                    </div>
                    
                    <div class="drill-down-level locked" data-level="3" data-topic="infra">
                        <div class="level-header">
                            <div class="d-flex align-items-center">
                                <div class="level-icon level-3">3</div>
                                <span>Docker image and GitHub commit verification available</span>
                            </div>
                            <i class="fas fa-chevron-right expand-icon"></i>
                        </div>
                        <div class="level-content">
                            <p><strong>Infrastructure Details:</strong></p>
                            <div class="row">
                                <div class="col-md-6">
                                    <strong>Current Deployment:</strong>
                                    <div class="technical-data">
                                        Image: attestai/chat-interface:v2.1.0<br>
                                        SHA256: abc123def456...<br>
                                        Built: 2024-06-24 14:30 UTC
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <strong>Source Code:</strong>
                                    <div class="technical-data">
                                        Repo: MrGarbonzo/secretGPT<br>
                                        Branch: attest_ai<br>
                                        Commit: def456789abc...
                                    </div>
                                </div>
                            </div>
                            <p class="mt-2">
                                <a href="https://github.com/MrGarbonzo/secretGPT/tree/attest_ai" target="_blank" class="btn btn-outline-primary btn-sm">
                                    <i class="fab fa-github"></i> View Source Code
                                </a>
                                <a href="#" class="btn btn-outline-secondary btn-sm ms-2">
                                    <i class="fab fa-docker"></i> View Docker Image
                                </a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Verifying Your Attestation -->
        <div class="card mb-4" id="verification-generation-section">
            <div class="card-header">
                <h5><i class="fas fa-search"></i> Verifying Your Attestation</h5>
            </div>
            <div class="card-body">
                <p class="lead">Verification proves your attestation measurements are cryptographically authentic and match expected values for a secure system.</p>
                
                <div class="row mb-3">
                    <div class="col-md-6">
                        <h6><i class="fas fa-check-circle"></i> Chain of Trust</h6>
                        <p class="mb-2">Cryptographic validation from Intel to your VM:</p>
                        <ul class="list-unstyled">
                            <li><i class="fas fa-arrow-right text-primary"></i> Intel Root CA validates platform certificates</li>
                            <li><i class="fas fa-arrow-right text-primary"></i> Platform certificates sign your VM's measurements</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h6><i class="fas fa-balance-scale"></i> Measurement Validation</h6>
                        <p class="mb-2">Compare actual vs expected values:</p>
                        <ul class="list-unstyled">
                            <li><i class="fas fa-arrow-right text-success"></i> MRTD: Matches known-good boot configuration</li>
                            <li><i class="fas fa-arrow-right text-success"></i> RTMRs: Current runtime state is legitimate</li>
                        </ul>
                    </div>
                </div>

                <!-- What Verification Proves -->
                <div class="row mb-4">
                    <div class="col-md-6">
                        <h6><i class="fas fa-check-circle"></i> What Verification Proves</h6>
                        <ul class="list-unstyled">
                            <li><i class="fas fa-arrow-right text-success"></i> Measurements are cryptographically authentic</li>
                            <li><i class="fas fa-arrow-right text-success"></i> System matches known-good configuration</li>
                            <li><i class="fas fa-arrow-right text-success"></i> No tampering since secure boot</li>
                            <li><i class="fas fa-arrow-right text-success"></i> Hardware and software integrity confirmed</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h6><i class="fas fa-exclamation-triangle"></i> What Verification Catches</h6>
                        <ul class="list-unstyled">
                            <li><i class="fas fa-arrow-right text-danger"></i> Malware injection attempts</li>
                            <li><i class="fas fa-arrow-right text-danger"></i> Unauthorized code modifications</li>
                            <li><i class="fas fa-arrow-right text-danger"></i> Configuration tampering</li>
                            <li><i class="fas fa-arrow-right text-danger"></i> Replay attacks with old measurements</li>
                        </ul>
                    </div>
                </div>

                <!-- Certificate Chain of Trust -->
                <h6><i class="fas fa-link"></i> Certificate Chain of Trust</h6>
                <p class="mb-3">Attestation verification follows a chain of cryptographic trust back to Intel:</p>
                
                <div class="cert-chain">
                    <div class="cert-level root">
                        <i class="fas fa-certificate"></i>
                        <div><strong>Intel Root CA</strong></div>
                        <small>Hardware manufacturer</small>
                    </div>
                    <div class="cert-arrow">
                        <i class="fas fa-arrow-right"></i>
                    </div>
                    <div class="cert-level intermediate">
                        <i class="fas fa-microchip"></i>
                        <div><strong>TDX Platform</strong></div>
                        <small>Specific CPU/motherboard</small>
                    </div>
                    <div class="cert-arrow">
                        <i class="fas fa-arrow-right"></i>
                    </div>
                    <div class="cert-level leaf">
                        <i class="fas fa-server"></i>
                        <div><strong>Your VM</strong></div>
                        <small>Attestation report</small>
                    </div>
                </div>

                <div class="alert alert-info">
                    <i class="fas fa-info-circle"></i> <strong>Root of Trust:</strong> 
                    Intel's root certificates are embedded in TDX hardware during manufacturing and cannot be modified. This creates an unbreakable chain of trust from your VM back to Intel's secure facilities.
                </div>

                <!-- Verification Steps -->
                <h6 class="mt-4"><i class="fas fa-list-ol"></i> Step-by-Step Verification Process</h6>
                
                <div class="verification-step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <div class="step-title">Certificate Validation</div>
                        <div class="step-description">
                            Verify the attestation report's digital signature using Intel's certificate chain. This proves the measurements came from genuine Intel TDX hardware, not a fake or compromised system.
                        </div>
                    </div>
                </div>

                <div class="verification-step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <div class="step-title">Measurement Comparison</div>
                        <div class="step-description">
                            Compare actual MRTD and RTMR values against known-good "golden" measurements for your specific system configuration. Exact matches prove no unauthorized changes occurred.
                        </div>
                    </div>
                </div>

                <div class="verification-step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <div class="step-title">Freshness Check</div>
                        <div class="step-description">
                            Verify the attestation timestamp and nonce to prevent replay attacks. This ensures you're seeing current measurements, not old ones from a compromised system.
                        </div>
                    </div>
                </div>
            </div>
        </div>

                <!-- Additional Resources -->
                <div class="card">
                    <div class="card-header">
                        <h5><i class="fas fa-external-link-alt"></i> Learn More</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4">
                                <h6><i class="fas fa-book"></i> Documentation</h6>
                                <ul class="list-unstyled">
                                    <li><a href="https://docs.secretnetwork.com/" target="_blank">Secret Network Docs</a></li>
                                    <li><a href="https://intel.com/content/www/us/en/developer/tools/trust-domain-extensions/overview.html" target="_blank">Intel TDX Overview</a></li>
                                </ul>
                            </div>
                            <div class="col-md-4">
                                <h6><i class="fab fa-github"></i> Source Code</h6>
                                <ul class="list-unstyled">
                                    <li><a href="https://github.com/scrtlabs/SecretNetwork" target="_blank">Secret Network</a></li>
                                    <li><a href="#" target="_blank">Attest AI (Coming Soon)</a></li>
                                </ul>
                            </div>
                            <div class="col-md-4">
                                <h6><i class="fas fa-question-circle"></i> Support</h6>
                                <ul class="list-unstyled">
                                    <li><a href="https://discord.gg/secret-network" target="_blank">Discord Community</a></li>
                                    <li><a href="https://forum.scrt.network/" target="_blank">Forum</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Demo attestation functionality - same as main attestation.js
        document.addEventListener('DOMContentLoaded', function() {
            // Verification buttons
            const verifySelfButton = document.getElementById('verify-self-vm');
            const verifySecretAIButton = document.getElementById('verify-secretai-vm');
            const verifyBothButton = document.getElementById('verify-both-vms');

            // Demo attestation data
            const demoAttestationData = {
                self: {
                    mrtd: "d1b2c3a4f5e6d7c8b9a0f1e2d3c4b5a6f7e8d9c0b1a2f3e4d5c6b7a8f9e0d1c2",
                    rtmr0: "a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a1b2",
                    rtmr1: "b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a1b2c3",
                    rtmr2: "c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a1b2c3d4",
                    rtmr3: "d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a1b2c3d4e5",
                    report_data: "41747465737441490000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                    certificate_fingerprint: "sha256:1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b",
                    timestamp: new Date().toISOString()
                },
                secretai: {
                    mrtd: "e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a1b2c3d4e5f6",
                    rtmr0: "f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a1b2c3d4e5f6a7",
                    rtmr1: "a7b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a1b2c3d4e5f6a7b8",
                    rtmr2: "b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a1b2c3d4e5f6a7b8c9",
                    rtmr3: "c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a1b2c3d4e5f6a7b8c9d0",
                    report_data: "536563726574414900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                    certificate_fingerprint: "sha256:2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b3",
                    timestamp: new Date().toISOString()
                }
            };

            function setLoadingState(vmType, loading) {
                const loadingDiv = document.getElementById(`${vmType}-vm-loading`);
                const detailsDiv = document.getElementById(`${vmType}-vm-details`);
                const errorDiv = document.getElementById(`${vmType}-vm-error`);
                
                if (loading) {
                    if (loadingDiv) loadingDiv.style.display = 'block';
                    if (detailsDiv) detailsDiv.style.display = 'none';
                    if (errorDiv) errorDiv.style.display = 'none';
                } else {
                    if (loadingDiv) loadingDiv.style.display = 'none';
                }
            }

            function updateVMStatus(vmId, status) {
                const statusIcon = document.getElementById(`${vmId}-status`);
                const statusText = document.getElementById(`${vmId}-text`);
                const vmBox = document.getElementById(`${vmId}-box`);
                
                if (statusIcon && statusText && vmBox) {
                    switch (status) {
                        case 'verified':
                            statusIcon.className = 'status-circle status-connected';
                            statusText.textContent = 'Verified';
                            vmBox.classList.add('verified');
                            vmBox.classList.remove('error');
                            break;
                        case 'error':
                            statusIcon.className = 'status-circle status-error';
                            statusText.textContent = 'Verification Failed';
                            vmBox.classList.add('error');
                            vmBox.classList.remove('verified');
                            break;
                        case 'checking':
                            statusIcon.className = 'status-circle status-checking';
                            statusText.textContent = 'Verifying...';
                            break;
                        default:
                            statusIcon.className = 'status-circle status-unknown';
                            statusText.textContent = 'Not Verified';
                            vmBox.classList.remove('verified', 'error');
                    }
                }
            }

            function displayAttestationData(vmType, attestation) {
                const detailsDiv = document.getElementById(`${vmType}-vm-details`);
                if (!detailsDiv) return;

                // Update all attestation fields
                document.getElementById(`${vmType}-mrtd`).textContent = attestation.mrtd;
                document.getElementById(`${vmType}-rtmr0`).textContent = attestation.rtmr0;
                document.getElementById(`${vmType}-rtmr1`).textContent = attestation.rtmr1;
                document.getElementById(`${vmType}-rtmr2`).textContent = attestation.rtmr2;
                document.getElementById(`${vmType}-rtmr3`).textContent = attestation.rtmr3;
                document.getElementById(`${vmType}-report-data`).textContent = attestation.report_data;
                document.getElementById(`${vmType}-cert-fingerprint`).textContent = attestation.certificate_fingerprint;
                
                // Format timestamp
                const timestamp = new Date(attestation.timestamp).toLocaleString();
                document.getElementById(`${vmType}-timestamp`).textContent = timestamp;

                // Show details
                detailsDiv.style.display = 'block';

                // Update progressive disclosure with real data
                updateProgressiveDisclosureData(attestation);
            }

            function verifyVM(vmType) {
                setLoadingState(vmType, true);
                updateVMStatus(`${vmType}-vm`, 'checking');
                
                // Simulate verification delay
                setTimeout(() => {
                    try {
                        const attestationData = demoAttestationData[vmType];
                        displayAttestationData(vmType, attestationData);
                        updateVMStatus(`${vmType}-vm`, 'verified');
                        showAlert(`${vmType === 'self' ? 'Attest AI' : 'Secret AI'} VM verified successfully!`, 'success');
                    } catch (error) {
                        updateVMStatus(`${vmType}-vm`, 'error');
                        showAlert(`${vmType === 'self' ? 'Attest AI' : 'Secret AI'} VM verification failed!`, 'danger');
                    } finally {
                        setLoadingState(vmType, false);
                    }
                }, 2000);
            }

            // Event listeners
            if (verifySelfButton) {
                verifySelfButton.addEventListener('click', () => verifyVM('self'));
            }
            
            if (verifySecretAIButton) {
                verifySecretAIButton.addEventListener('click', () => verifyVM('secretai'));
            }
            
            if (verifyBothButton) {
                verifyBothButton.addEventListener('click', () => {
                    verifyVM('self');
                    setTimeout(() => verifyVM('secretai'), 1000);
                });
            }

            function showAlert(message, type) {
                const alertDiv = document.createElement('div');
                alertDiv.className = `alert alert-${type} alert-dismissible fade show position-fixed`;
                alertDiv.style.cssText = 'top: 20px; right: 20px; z-index: 9999; max-width: 400px;';
                alertDiv.innerHTML = `
                    ${message}
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                `;

                document.body.appendChild(alertDiv);

                setTimeout(() => {
                    if (alertDiv.parentNode) {
                        alertDiv.remove();
                    }
                }, 5000);
            }

            function updateProgressiveDisclosureData(attestation) {
                // Update MRTD display
                const mrtdDisplay = document.getElementById('current-mrtd');
                if (mrtdDisplay) {
                    mrtdDisplay.textContent = `MRTD: ${attestation.mrtd}`;
                }

                // Update RTMR display
                const rtmrDisplay = document.getElementById('current-rtmr');
                if (rtmrDisplay) {
                    rtmrDisplay.innerHTML = `
                        RTMR0: ${attestation.rtmr0}<br>
                        RTMR1: ${attestation.rtmr1}<br>
                        RTMR2: ${attestation.rtmr2}<br>
                        RTMR3: ${attestation.rtmr3}
                    `;
                }

                // Update Report Data display
                const reportDisplay = document.getElementById('current-report');
                if (reportDisplay) {
                    reportDisplay.textContent = `Report Data: ${attestation.report_data}`;
                }

                // Update Certificate display
                const certDisplay = document.getElementById('current-cert');
                if (certDisplay) {
                    certDisplay.textContent = `Certificate: ${attestation.certificate_fingerprint}`;
                }
            }

            // Progressive disclosure functionality
            const drillDownLevels = document.querySelectorAll('.drill-down-level');
            
            drillDownLevels.forEach(level => {
                level.addEventListener('click', function() {
                    if (this.classList.contains('locked')) return;
                    
                    const content = this.querySelector('.level-content');
                    const icon = this.querySelector('.expand-icon');
                    const currentLevel = parseInt(this.dataset.level);
                    const topic = this.dataset.topic;
                    
                    // Toggle current level
                    if (content.classList.contains('show')) {
                        content.classList.remove('show');
                        icon.classList.remove('rotated');
                        this.classList.remove('active');
                        
                        // Lock subsequent levels
                        lockSubsequentLevels(topic, currentLevel);
                    } else {
                        content.classList.add('show');
                        icon.classList.add('rotated');
                        this.classList.add('active');
                        
                        // Unlock next level
                        unlockNextLevel(topic, currentLevel);
                    }
                });
            });
            
            function lockSubsequentLevels(topic, fromLevel) {
                const topicLevels = document.querySelectorAll(`[data-topic="${topic}"]`);
                topicLevels.forEach(level => {
                    const levelNum = parseInt(level.dataset.level);
                    if (levelNum > fromLevel) {
                        level.classList.add('locked');
                        const content = level.querySelector('.level-content');
                        const icon = level.querySelector('.expand-icon');
                        if (content) content.classList.remove('show');
                        if (icon) icon.classList.remove('rotated');
                        level.classList.remove('active');
                    }
                });
            }
            
            function unlockNextLevel(topic, currentLevel) {
                const nextLevel = document.querySelector(`[data-topic="${topic}"][data-level="${currentLevel + 1}"]`);
                if (nextLevel) {
                    nextLevel.classList.remove('locked');
                }
            }

            // Hash Timeline Functions
            window.expandHashTimeline = function() {
                document.getElementById('hash-explainer-compact').style.display = 'none';
                document.getElementById('hash-timeline-expanded').style.display = 'block';
                
                // Smooth scroll to expanded content with slight delay for better UX
                setTimeout(() => {
                    document.getElementById('hash-timeline-expanded').scrollIntoView({ 
                        behavior: 'smooth', 
                        block: 'start' 
                    });
                }, 100);
            }

            window.collapseHashTimeline = function() {
                document.getElementById('hash-timeline-expanded').style.display = 'none';
                document.getElementById('hash-explainer-compact').style.display = 'block';
                
                // Smooth scroll back to the section header
                document.getElementById('hash-generation-section').scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'start' 
                });
            }

            window.toggleVerticalDetails = function(step) {
                const details = document.getElementById(`v-details-${step}`);
                const isVisible = details.style.display !== 'none';
                
                details.style.display = isVisible ? 'none' : 'block';
            }

            // Verification Process Functions
            window.expandVerificationProcess = function() {
                document.getElementById('verification-explainer-compact').style.display = 'none';
                document.getElementById('verification-process-expanded').style.display = 'block';
                
                // Smooth scroll to expanded content with slight delay for better UX
                setTimeout(() => {
                    document.getElementById('verification-process-expanded').scrollIntoView({ 
                        behavior: 'smooth', 
                        block: 'start' 
                    });
                }, 100);
            }

            window.collapseVerificationProcess = function() {
                document.getElementById('verification-process-expanded').style.display = 'none';
                document.getElementById('verification-explainer-compact').style.display = 'block';
                
                // Smooth scroll back to the section header
                document.getElementById('verification-generation-section').scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'start' 
                });
            }
        });
    </script>
</body>
</html>